apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: sqs-consumer
  namespace: flux-system
spec:
  chart:
    spec:
      chart: ./charts/sqs-app/sqs-consumer
      version: ">=1.0.0"
      sourceRef:
        kind: GitRepository
        name: aws-eks-fluxcd-lab
        namespace: flux-system
  values:
  deployment:
    container:
      image:
        repository: 704855531002.dkr.ecr.us-west-2.amazonaws.com/eks-fluxcd-lab-sqs-consumer
        tag: latest
      sqsQueueName: eks-fluxcd-lab-sqs-queue
    serviceAccountName: sa-aws-sqs
  interval: 2m0s
  releaseName: sqs-consumer
  targetNamespace: sqs-app
